THREE.OBJExporter=class t{parse(t,e=""){let o="";o+="mtllib "+e+"\n";let r={},$=0,n=0,i=0,l=new THREE.Vector3,f=new THREE.Color,u=new THREE.Vector3,m=new THREE.Vector2,a=[];t.traverse(function(t){!0===t.isMesh&&function t(e){let f=0,y=0,g=0,c=e.geometry,x=e.material,s=new THREE.Matrix3;if(!0!==c.isBufferGeometry)throw Error("THREE.OBJExporter: Geometry is not of type THREE.BufferGeometry.");let p=c.getAttribute("position"),E=c.getAttribute("normal"),d=c.getAttribute("uv"),b=c.getIndex();if(o+="o "+e.name+"\n",x){let v=""!==x.name?x.name:"material"+x.id;o+="usemtl "+v+"\n",r[v]=x}if(void 0!==p)for(let _=0,B=p.count;_<B;_++,f++)l.x=p.getX(_),l.y=p.getY(_),l.z=p.getZ(_),l.applyMatrix4(e.matrixWorld),o+="v "+l.x+" "+l.y+" "+l.z+"\n";if(void 0!==d)for(let w=0,G=d.count;w<G;w++,g++)m.x=d.getX(w),m.y=d.getY(w),o+="vt "+m.x+" "+m.y+"\n";if(void 0!==E){s.getNormalMatrix(e.matrixWorld);for(let z=0,A=E.count;z<A;z++,y++)u.x=E.getX(z),u.y=E.getY(z),u.z=E.getZ(z),u.applyMatrix3(s).normalize(),o+="vn "+u.x+" "+u.y+" "+u.z+"\n"}if(null!==b)for(let T=0,M=b.count;T<M;T+=3){for(let H=0;H<3;H++){let R=b.getX(T+H)+1;a[H]=$+R+(E||d?"/"+(d?n+R:"")+(E?"/"+(i+R):""):"")}o+="f "+a.join(" ")+"\n"}else for(let X=0,h=p.count;X<h;X+=3){for(let J=0;J<3;J++){let K=X+J+1;a[J]=$+K+(E||d?"/"+(d?n+K:"")+(E?"/"+(i+K):""):"")}o+="f "+a.join(" ")+"\n"}$+=f,n+=g,i+=y}(t),!0===t.isLine&&function t(e){let r=0,n=e.geometry,i=e.type;if(!0!==n.isBufferGeometry)throw Error("THREE.OBJExporter: Geometry is not of type THREE.BufferGeometry.");let f=n.getAttribute("position");if(o+="o "+e.name+"\n",void 0!==f)for(let u=0,m=f.count;u<m;u++,r++)l.x=f.getX(u),l.y=f.getY(u),l.z=f.getZ(u),l.applyMatrix4(e.matrixWorld),o+="v "+l.x+" "+l.y+" "+l.z+"\n";if("Line"===i){o+="l ";for(let a=1,y=f.count;a<=y;a++)o+=$+a+" ";o+="\n"}if("LineSegments"===i)for(let g=1,c=g+1,x=f.count;g<x;g+=2,c=g+1)o+="l "+($+g)+" "+($+c)+"\n";$+=r}(t),!0===t.isPoints&&function t(e){let r=0,n=e.geometry;if(!0!==n.isBufferGeometry)throw Error("THREE.OBJExporter: Geometry is not of type THREE.BufferGeometry.");let i=n.getAttribute("position"),u=n.getAttribute("color");if(o+="o "+e.name+"\n",void 0!==i)for(let m=0,a=i.count;m<a;m++,r++)l.fromBufferAttribute(i,m),l.applyMatrix4(e.matrixWorld),o+="v "+l.x+" "+l.y+" "+l.z,void 0!==u&&(f.fromBufferAttribute(u,m),o+=" "+f.r+" "+f.g+" "+f.b),o+="\n";o+="p ";for(let y=1,g=i.count;y<=g;y++)o+=$+y+" ";o+="\n",$+=r}(t)});let y="";for(let g in r){let c=r[g];y+="newmtl "+g+"\n",y+="Ns 10.0000\n",y+="Ni 1.5000\n",y+="d 1.0000\n",y+="Tr 0.0000\n",y+="Tf 1.0000 1.0000 1.0000\n",y+="illum 2\n",y+="Ka "+c.color.r+" "+c.color.g+" "+c.color.b+" \n",y+="Kd "+c.color.r+" "+c.color.g+" "+c.color.b+" \n",y+="Ks 0.0000 0.0000 0.0000\n",y+="Ke 0.0000 0.0000 0.0000\n"}return{obj:o,mtl:y}}};